<!DOCTYPE html>
<html>
<head>
    <title>Simple Clip Sharing</title>
    <style>
        body { 
            font-family: Arial; 
            background-color: #1b2838; 
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .auth-box {
            background-color: #2a3f5a;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
        }
        input {
            width: 100%;
            padding: 8px;
            margin: 8px 0;
            box-sizing: border-box;
        }
        button {
            background-color: #66c0f4;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            margin-top: 10px;
            cursor: pointer;
        }
        .link {
            color: #66c0f4;
            cursor: pointer;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="auth-box">
        <h2>Clip Share</h2>
        
        <!-- Login Form -->
        <div id="login-form">
            <h3>Login</h3>
            <input type="email" id="login-email" placeholder="Email">
            <input type="password" id="login-password" placeholder="Password">
            <button id="login-btn">Login</button>
            <p>Don't have an account? <span class="link" id="show-register">Register</span></p>
        </div>
        
        <!-- Register Form (hidden by default) -->
        <div id="register-form" style="display:none;">
            <h3>Register</h3>
            <input type="text" id="register-username" placeholder="Username">
            <input type="email" id="register-email" placeholder="Email">
            <input type="password" id="register-password" placeholder="Password">
            <button id="register-btn">Register</button>
            <button style="background-color: #333; color: white; padding: 10px; border: none; border-radius: 4px; margin-top: 10px; width: 100%;" onclick="firebase.auth().signInAnonymously().then(() => alert('Guest login successful!')).catch(e => alert(e.message))">Continue as Guest</button>
            <p>Already have an account? <span class="link" id="show-login">Login</span></p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore-compat.js"></script>
    
    <script>
        // Your Firebase config
        const firebaseConfig = {
          apiKey: "AlzaSyCSwâ€‹TYVk-4fk7ENVHp4wyZ9AaL4dKHfwQc",
          authDomain: "zenkai-share.firebaseapp.com",
          projectId: "zenkai-share",
          storageBucket: "zenkai-share.firebasestorage.app",
          messagingSenderId: "142738616429",
          appId: "1:142738616429:web:2c84c2d631ff1b9e884f64"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        
        // DOM elements
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const showRegisterBtn = document.getElementById('show-register');
        const showLoginBtn = document.getElementById('show-login');
        const registerBtn = document.getElementById('register-btn');
        const loginBtn = document.getElementById('login-btn');
        
        // Show register form
        showRegisterBtn.onclick = function() {
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
            alert('Showing register form');
        }
        
        // Show login form
        showLoginBtn.onclick = function() {
            registerForm.style.display = 'none';
            loginForm.style.display = 'block';
            alert('Showing login form');
        }
        
        // Register new user
        registerBtn.onclick = function() {
            alert('Register button clicked');
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            
            if (!username || !email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Add user info to Firestore
                    firebase.firestore().collection('users').doc(userCredential.user.uid).set({
                        username: username,
                        email: email,
                        createdAt: new Date().getTime()
                    }).then(() => {
                        alert('Registration successful!');
                        // You can redirect or show main app here
                    });
                })
                .catch((error) => {
                    alert('Registration error: ' + error.message);
                 });
        }
        
        // Login existing user
        loginBtn.onclick = function() {
            alert('Login button clicked');
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    alert('Login successful!');
                    // You can redirect or show main app here
                })
                .catch((error) => {
                    alert('Login error: ' + error.message);
                });
        }
    </script>
</body>
</html>
